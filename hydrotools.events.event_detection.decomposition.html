<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="hydrotools.caches subpackage" href="hydrotools.caches.html" /><link rel="prev" title="hydrotools.events.event_detection subpackage" href="hydrotools.events.event_detection.html" />

    <meta name="generator" content="sphinx-4.2.0, furo 2021.09.22"/>
        <title>hydrotools.events.event_detection.decomposition module - OWPHydroTools 2.1.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=150e365fa939648e89c22f6d7d13c72a1657915a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">OWPHydroTools 2.1.2 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">OWPHydroTools 2.1.2 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">API:</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="hydrotools.nwis_client.html">hydrotools.nwis_client subpackage</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="hydrotools.nwis_client.iv.html">hydrotools.nwis_client.iv module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="hydrotools.nwm_client.html">hydrotools.nwm_client subpackage</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="hydrotools.nwm_client.gcp.html">hydrotools.nwm_client.gcp module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools.nwm_client.http.html">hydrotools.nwm_client.http module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools.nwm_client.utils.html">hydrotools.nwm_client.utils module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="hydrotools._restclient.html">hydrotools._restclient subpackage</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="hydrotools._restclient._iterable_nonstring.html">hydrotools._restclient._iterable_nonstring module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools._restclient._restclient.html">hydrotools._restclient._restclient module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools._restclient._restclient_sigs.html">hydrotools._restclient._restclient_sigs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools._restclient.async_client.html">hydrotools._restclient.async_client module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools._restclient.async_helpers.html">hydrotools._restclient.async_helpers module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools._restclient.urllib.html">hydrotools._restclient.urllib module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools._restclient.urllib_types.html">hydrotools._restclient.urllib_types module</a></li>
<li class="toctree-l2"><a class="reference internal" href="hydrotools._restclient.utilities.html">hydrotools._restclient.utilities module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="hydrotools.metrics.html">hydrotools.metrics subpackage</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="hydrotools.metrics.metrics.html">hydrotools.metrics.metrics module</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="hydrotools.events.event_detection.html">hydrotools.events.event_detection subpackage</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">hydrotools.events.event_detection.decomposition module</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="hydrotools.caches.html">hydrotools.caches subpackage</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="hydrotools.caches.hdf.html">hydrotools.caches.hdf module</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="module-hydrotools.events.event_detection.decomposition">
<span id="hydrotools-events-event-detection-decomposition-module"></span><h1>hydrotools.events.event_detection.decomposition module<a class="headerlink" href="#module-hydrotools.events.event_detection.decomposition" title="Permalink to this headline">¶</a></h1>
<section id="event-detection-decomposition">
<h2>Event Detection :: Decomposition<a class="headerlink" href="#event-detection-decomposition" title="Permalink to this headline">¶</a></h2>
<p>Use time series decomposition to detect hydrological events in
streamflow time series as described in Regina &amp; Ogden, 2020.</p>
<dl class="simple">
<dt>Regina, J.A., F.L. Ogden, 2020.  Automated Correction of Systematic</dt><dd><p>Errors in High-Frequency Stage Data from V-Notch Weirs using
Time Series Decomposition., Under review., Hydrol. Proc.</p>
</dd>
</dl>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<p>rolling_minimum
detrend_streamflow
mark_event_flows
find_local_minimum
event_boundaries
list_events</p>
<dl class="py function">
<dt class="sig sig-object py" id="hydrotools.events.event_detection.decomposition.detrend_streamflow">
<span class="sig-prename descclassname"><span class="pre">hydrotools.events.event_detection.decomposition.</span></span><span class="sig-name descname"><span class="pre">detrend_streamflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">halflife</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.offsets.DateOffset</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.indexes.base.Index</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">pandas.core.series.Series</span></span></span><a class="headerlink" href="#hydrotools.events.event_detection.decomposition.detrend_streamflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Model the trend in a streamflow time series using a rolling
minimum filter. Remove the trend and residual components. The method
aims to produce a detrended time series with a median of 0.0. It assumes
any residual components less than twice the detrended median are random
noise.
Return the detrended streamflow time series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>pandas.Series with a DateTimeIndex</em><em>, </em><em>required</em>) – The original streamflow time series.</p></li>
<li><p><strong>halflife</strong> (<em>float</em><em>, </em><em>str</em><em>, </em><em>timedelta</em><em>, </em><em>required</em>) – Specifies the decay term for <cite>pandas.Series.ewm.mean</cite>. This filter
is used to smooth over interevent noise and reduce detection
of normal instrument fluctuations as events.</p></li>
<li><p><strong>window</strong> (<em>int</em><em>, </em><em>offset</em><em>, or </em><em>BaseIndexer subclass</em><em>, </em><em>required</em>) – Size of the moving window for <cite>pandas.Series.rolling.min</cite>.
This filter is used to model the trend in <cite>series</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>detrended</strong> – New streamflow time series with trend removed.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="hydrotools.events.event_detection.decomposition.event_boundaries">
<span class="sig-prename descclassname"><span class="pre">hydrotools.events.event_detection.decomposition.</span></span><span class="sig-name descname"><span class="pre">event_boundaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_points</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hydrotools.events.event_detection.decomposition.event_boundaries" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a two column pandas.DataFrame with ‘start’ and ‘end’ event times
generated from a time series of boolean event points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>event_points</strong> (<em>pandas.Series</em>) – Boolean time series where True indicates the associated value
in the <cite>series</cite> is part of an event.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>events</strong> – A two column DataFrame with a row for each event detected. <cite>start</cite> and
<cite>end</cite> columns indicate the boundaries of each event.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="hydrotools.events.event_detection.decomposition.find_local_minimum">
<span class="sig-prename descclassname"><span class="pre">hydrotools.events.event_detection.decomposition.</span></span><span class="sig-name descname"><span class="pre">find_local_minimum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas._libs.tslibs.timestamps.Timestamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeseries</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#hydrotools.events.event_detection.decomposition.find_local_minimum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return Datetime of the local minimum value within radius of origin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origin</strong> (<em>pandas.Timestamp</em><em>, </em><em>required</em>) – The central datetime around which to search.</p></li>
<li><p><strong>radius</strong> (<em>float</em><em>, </em><em>str</em><em>, </em><em>pd.Timedelta</em><em>, </em><em>required</em>) – The search radius around origin to look for a minimum value.</p></li>
<li><p><strong>timseries</strong> (<em>pandas.Series with a DateTimeIndex</em><em>, </em><em>required</em>) – The original time series to inspect.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Datetime of the local minimum value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Index</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="hydrotools.events.event_detection.decomposition.list_events">
<span class="sig-prename descclassname"><span class="pre">hydrotools.events.event_detection.decomposition.</span></span><span class="sig-name descname"><span class="pre">list_events</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">halflife</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.offsets.DateOffset</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.indexes.base.Index</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_event_duration</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">datetime.timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.timedelta64</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'0H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_radius</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">datetime.timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.timedelta64</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'0H'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="headerlink" href="#hydrotools.events.event_detection.decomposition.list_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply time series decomposition to mark event values in a streamflow
time series. Discretize continuous event values into indiviual events.
Return a DataFrame with one row for each event detected with <cite>start</cite> and
<cite>end</cite> columns indicating the boundaries of each event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>pandas.Series with a DateTimeIndex</em><em>, </em><em>required</em>) – The original streamflow time series.</p></li>
<li><p><strong>halflife</strong> (<em>float</em><em>, </em><em>str</em><em>, </em><em>timedelta</em><em>, </em><em>required</em>) – Specifies the decay term for <cite>pandas.Series.ewm.mean</cite>. This filter
is used to smooth over interevent noise and reduce detection
of normal instrument fluctuations as events.</p></li>
<li><p><strong>window</strong> (<em>int</em><em>, </em><em>offset</em><em>, or </em><em>BaseIndexer subclass</em><em>, </em><em>required</em>) – Size of the moving window for <cite>pandas.Series.rolling.min</cite>.
This filter is used to model the trend in <cite>series</cite>.</p></li>
<li><p><strong>minimum_event_duration</strong> (<em>pandas.Timedelta</em><em>, </em><em>datetime.timedelta</em><em>, </em><em>numpy.timedelta64</em><em>, </em><em>str</em><em>, </em><em>int</em><em>, </em><em>optional</em><em>, </em><em>default '0H'</em>) – Enforce a minimum event duration. This should generally be set equal to
halflife to reduce the number of false positives flagged as events.</p></li>
<li><p><strong>start_radius</strong> (<em>pandas.Timedelta</em><em>, </em><em>datetime.timedelta</em><em>, </em><em>numpy.timedelta64</em><em>, </em><em>str</em><em>, </em><em>int</em><em>, </em><em>optional</em><em>, </em><em>default '0H'</em>) – Shift event starts to a local minimum. Phase shifts imparted on the
original signal may advance or delay event start times depending upon how
much smoothing is required to eliminate noise.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>events</strong> – A two column DataFrame with a row for each event detected. <cite>start</cite> and
<cite>end</cite> columns indicate the boundaries of each event.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="hydrotools.events.event_detection.decomposition.mark_event_flows">
<span class="sig-prename descclassname"><span class="pre">hydrotools.events.event_detection.decomposition.</span></span><span class="sig-name descname"><span class="pre">mark_event_flows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">halflife</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.offsets.DateOffset</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.indexes.base.Index</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum_event_duration</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">datetime.timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.timedelta64</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'0H'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_radius</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">datetime.timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.timedelta64</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'0H'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">pandas.core.series.Series</span></span></span><a class="headerlink" href="#hydrotools.events.event_detection.decomposition.mark_event_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Model the trend in a streamflow time series by taking the max
of two rolling minimum filters applied in a forward and
backward fashion. Remove the trend and residual components. The method
aims to produce a detrended time series with a median of 0.0. It assumes
any residual components less than twice the detrended median are random
noise.
Return the boolean time series that indicates whether an
individual value in the original streamflow time series
is part of an event (True) or not part of an event (False).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>pandas.Series with a DateTimeIndex</em><em>, </em><em>required</em>) – The original streamflow time series.</p></li>
<li><p><strong>halflife</strong> (<em>float</em><em>, </em><em>str</em><em>, </em><em>timedelta</em><em>, </em><em>required</em>) – Specifies the decay term for <cite>pandas.Series.ewm.mean</cite>. This filter
is used to smooth over interevent noise and reduce detection
of normal instrument fluctuations as events.</p></li>
<li><p><strong>window</strong> (<em>int</em><em>, </em><em>offset</em><em>, or </em><em>BaseIndexer subclass</em><em>, </em><em>required</em>) – Size of the moving window for <cite>pandas.Series.rolling.min</cite>.
This filter is used to model the trend in <cite>series</cite>.</p></li>
<li><p><strong>minimum_event_duration</strong> (<em>pandas.Timedelta</em><em>, </em><em>datetime.timedelta</em><em>, </em><em>numpy.timedelta64</em><em>, </em><em>str</em><em>, </em><em>int</em><em>, </em><em>optional</em><em>, </em><em>default '0H'</em>) – Enforce a minimum event duration. This should generally be set equal to
halflife to reduce the number of false positives flagged as events.</p></li>
<li><p><strong>start_radius</strong> (<em>pandas.Timedelta</em><em>, </em><em>datetime.timedelta</em><em>, </em><em>numpy.timedelta64</em><em>, </em><em>str</em><em>, </em><em>int</em><em>, </em><em>optional</em><em>, </em><em>default '0H'</em>) – Shift event starts to a local minimum. Phase shifts imparted on the
original signal may advance or delay event start times depending upon how
much smoothing is required to eliminate noise.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>event_points</strong> – Boolean time series where True indicates the associated value
in the <cite>series</cite> is part of an event.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="hydrotools.events.event_detection.decomposition.rolling_minimum">
<span class="sig-prename descclassname"><span class="pre">hydrotools.events.event_detection.decomposition.</span></span><span class="sig-name descname"><span class="pre">rolling_minimum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.offsets.DateOffset</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.indexes.base.Index</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">pandas.core.series.Series</span></span></span><a class="headerlink" href="#hydrotools.events.event_detection.decomposition.rolling_minimum" title="Permalink to this definition">¶</a></dt>
<dd><p>Model the trend in a streamflow time series using a rolling
minimum filter.
Return the trend of a streamflow time series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>pandas.Series with a DateTimeIndex</em><em>, </em><em>required</em>) – The original streamflow time series.</p></li>
<li><p><strong>window</strong> (<em>int</em><em>, </em><em>offset</em><em>, or </em><em>BaseIndexer subclass</em><em>, </em><em>required</em>) – Size of the moving window for <cite>pandas.Series.rolling.min</cite>.
This filter is used to model the trend in <cite>series</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>trend</strong> – Approximate baseflow trend of original series.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="hydrotools.caches.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">hydrotools.caches subpackage</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="hydrotools.events.event_detection.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">hydrotools.events.event_detection subpackage</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Jason A. Regina and Austin Raney |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>. |
            <a class="muted-link" href="_sources/hydrotools.events.event_detection.decomposition.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">hydrotools.events.event_detection.decomposition module</a><ul>
<li><a class="reference internal" href="#event-detection-decomposition">Event Detection :: Decomposition</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/main.js"></script>
    </body>
</html>